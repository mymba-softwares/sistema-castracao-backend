# ğŸ—„ï¸ Diagrama de Entidade-Relacionamento (ER)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SISTEMA DE CASTRAÃ‡ÃƒO ANIMAL                             â”‚
â”‚                           (Projeto Mymba - UFRPE)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AUTENTICAÃ‡ÃƒO E USUÃRIOS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     users       â”‚ â—„â”€â”€â”€â”€â”
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
    â”‚ id (PK)         â”‚      â”‚
    â”‚ role            â”‚      â”‚ 1:1
    â”‚ email           â”‚      â”‚
    â”‚ hashedPassword  â”‚      â”‚
    â”‚ completeName    â”‚      â”œâ”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ cpf             â”‚      â”‚    â”‚    tokens       â”‚
    â”‚ phone           â”‚      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ createdAt       â”‚      â”‚    â”‚ id (PK)         â”‚
    â”‚ updatedAt       â”‚      â”‚    â”‚ userId (FK)     â”‚
    â”‚ recoveryMode    â”‚      â”‚    â”‚ jwt             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚ refreshJwt      â”‚
            â”‚                â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â–º 1:1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚        â”‚   petOwners     â”‚
            â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚        â”‚ id (PK)         â”‚
            â”‚        â”‚ userId (FK)     â”‚
            â”‚        â”‚ fullAddress     â”‚â”€â”€â”
            â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚                             â”‚
            â”‚                             â”œâ”€â”€â–º 1:N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                             â”‚        â”‚ commitmentTerms â”‚
            â”‚                             â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚                             â”‚        â”‚ id (PK)         â”‚
            â”‚                             â”‚        â”‚ petOwnerId (FK) â”‚
            â”‚                             â”‚        â”‚ signatureDate   â”‚
            â”‚                             â”‚        â”‚ documentUrl     â”‚
            â”‚                             â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                             â”‚
            â””â”€â”€â–º 1:1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                     â”‚ veterinarians   â”‚ â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
                     â”‚ id (PK)         â”‚ â”‚
                     â”‚ userId (FK)     â”‚ â”‚
                     â”‚ crmv            â”‚ â”‚
                     â”‚ active          â”‚ â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ANIMAIS E PRONTUÃRIOS                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                     â”‚    animals      â”‚â—„â”˜
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                     â”‚ id (PK)         â”‚
                     â”‚ petOwnerId (FK) â”‚â”€â”€â”€â”€â”€â”€â”
                     â”‚ name            â”‚      â”‚
                     â”‚ species         â”‚      â”‚ 1:N
                     â”‚ gender          â”‚      â”‚
                     â”‚ estimatedAge    â”‚      â”‚
                     â”‚ sizeWeight      â”‚      â”‚
                     â”‚ breed           â”‚      â”‚
                     â”‚ microchipNumber â”‚      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                             â”‚                â”‚
                             â”‚ 1:1            â”‚
                             â–¼                â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
                     â”‚ medicalRecords  â”‚      â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
                     â”‚ id (PK)         â”‚      â”‚
                     â”‚ animalId (FK)   â”‚      â”‚
                     â”‚ microchipNumber â”‚      â”‚
                     â”‚ createdAt       â”‚      â”‚
                     â”‚ updatedAt       â”‚      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                             â”‚                â”‚
                             â”‚ 1:N            â”‚
                             â–¼                â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
                     â”‚ clinicalRecords â”‚      â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
                     â”‚ id (PK)         â”‚      â”‚
                     â”‚ medicalRecordId â”‚      â”‚
                     â”‚ appointmentId   â”‚â—„â”€â”   â”‚
                     â”‚ veterinarianId  â”‚  â”‚   â”‚
                     â”‚ type            â”‚  â”‚   â”‚
                     â”‚ treatmentDate   â”‚  â”‚   â”‚
                     â”‚ fitForSurgery   â”‚  â”‚   â”‚
                     â”‚ surgeryType     â”‚  â”‚   â”‚
                     â”‚ observations    â”‚  â”‚   â”‚
                     â”‚ instructions    â”‚  â”‚   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                          â”‚   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            AGENDAMENTOS                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚   â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                     â”‚  appointments   â”‚â”€â”€â”¼â”€â”€â”€â”˜
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                     â”‚ id (PK)         â”‚â”€â”€â”˜
                     â”‚ animalId (FK)   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ petOwnerId (FK) â”‚         â”‚
                     â”‚ serviceType     â”‚         â”‚
                     â”‚ startTime       â”‚         â”‚
                     â”‚ endTime         â”‚         â”‚
                     â”‚ status          â”‚         â”‚
                     â”‚ createdAt       â”‚         â”‚
                     â”‚ updatedAt       â”‚         â”‚
                     â”‚ notes           â”‚         â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       NOTIFICAÃ‡Ã•ES E LOGS                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
         â”‚  userDevices    â”‚                    â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
         â”‚ id (PK)         â”‚                    â”‚
         â”‚ userId (FK)     â”‚â”€â”€â”                 â”‚
         â”‚ fcmToken        â”‚  â”‚                 â”‚
         â”‚ deviceInfo      â”‚  â”‚                 â”‚
         â”‚ createdAt       â”‚  â”‚                 â”‚
         â”‚ lastActiveAt    â”‚  â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
                              â”‚ N:1             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
         â”‚ notifications   â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
         â”‚ id (PK)         â”‚  â”‚
         â”‚ userId (FK)     â”‚â”€â”€â”˜
         â”‚ title           â”‚
         â”‚ message         â”‚
         â”‚ read            â”‚
         â”‚ channel         â”‚
         â”‚ metadata        â”‚
         â”‚ createdAt       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   bulletins     â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ id (PK)         â”‚
         â”‚ createdByUserId â”‚â”€â”€â”€â”€â”€â”€â”
         â”‚ title           â”‚      â”‚ N:1
         â”‚ message         â”‚      â”‚
         â”‚ targetRoles     â”‚      â”‚
         â”‚ createdAt       â”‚      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
         â”‚   systemLogs    â”‚      â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
         â”‚ id (PK)         â”‚      â”‚
         â”‚ userId (FK)     â”‚â”€â”€â”€â”€â”€â”€â”˜
         â”‚ targetTable     â”‚
         â”‚ targetId        â”‚
         â”‚ action          â”‚
         â”‚ description     â”‚
         â”‚ type            â”‚
         â”‚ originIp        â”‚
         â”‚ createdAt       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    ENUMS                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Role                    Species         Gender          ServiceType
â”œâ”€ administrator        â”œâ”€ canine       â”œâ”€ male         â”œâ”€ triage
â”œâ”€ semas                â””â”€ feline       â””â”€ female       â”œâ”€ castrationSurgery
â”œâ”€ veterinarian                                         â””â”€ postOperative
â”œâ”€ receptionist         
â”œâ”€ petOwner             AppointmentStatus               ClinicalRecordType
â””â”€ student              â”œâ”€ scheduled                    â”œâ”€ triage
                        â”œâ”€ confirmed                    â”œâ”€ surgery
                        â”œâ”€ completed                    â””â”€ followUp
                        â”œâ”€ canceled
                        â””â”€ absent                       SurgeryType
                                                        â”œâ”€ orchiectomy
NotificationChannel     Target                          â””â”€ ovariohysterectomy
â”œâ”€ push                 â”œâ”€ all
â”œâ”€ email                â”œâ”€ petOwners                    LogType
â””â”€ whatsapp             â”œâ”€ semas                        â”œâ”€ info
                        â”œâ”€ veterinarians                â”œâ”€ warning
                        â””â”€ receptionists                â”œâ”€ error
                                                        â”œâ”€ security
                                                        â””â”€ audit

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            RELACIONAMENTOS                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1:1 (Um para Um)
â”œâ”€ User â†â†’ Token
â”œâ”€ User â†â†’ PetOwner
â”œâ”€ User â†â†’ Veterinarian
â”œâ”€ Animal â†â†’ MedicalRecord

1:N (Um para Muitos)
â”œâ”€ User â”€â”¬â”€â–º UserDevice
â”‚        â”œâ”€â–º Notification
â”‚        â”œâ”€â–º Bulletin (como criador)
â”‚        â””â”€â–º SystemLog
â”‚
â”œâ”€ PetOwner â”€â”¬â”€â–º Animal
â”‚            â”œâ”€â–º Appointment
â”‚            â””â”€â–º CommitmentTerm
â”‚
â”œâ”€ Veterinarian â”€â”€â–º ClinicalRecord
â”‚
â”œâ”€ Animal â”€â”€â–º Appointment
â”‚
â”œâ”€ MedicalRecord â”€â”€â–º ClinicalRecord
â”‚
â””â”€ Appointment â”€â”€â–º ClinicalRecord (opcional)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         POLÃTICAS DE DELEÃ‡ÃƒO                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CASCADE (Deletar em cascata)
â”œâ”€ User â†’ Token, PetOwner, Veterinarian
â”œâ”€ PetOwner â†’ Animal, Appointment, CommitmentTerm
â”œâ”€ Animal â†’ Appointment, MedicalRecord
â”œâ”€ MedicalRecord â†’ ClinicalRecord
â””â”€ UserDevice, Notification, Bulletin (quando User deletado)

SET NULL (Manter registro, anular referÃªncia)
â”œâ”€ User â†’ SystemLog (preserva histÃ³rico)
â””â”€ Appointment â†’ ClinicalRecord (preserva histÃ³rico)

RESTRICT (Impedir deleÃ§Ã£o)
â””â”€ Veterinarian â†’ ClinicalRecord (nÃ£o permite deletar vet com registros)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ÃNDICES ÃšNICOS                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

users:           email, cpf
tokens:          userId, jwt, refreshJwt
petOwners:       userId
veterinarians:   userId, crmv
animals:         microchipNumber
medicalRecords:  animalId, microchipNumber

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAMPOS OBRIGATÃ“RIOS (NOT NULL)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ User: role, email, hashedPassword, completeName, cpf, phone
âœ“ Animal: petOwnerId, species, gender, estimatedAge, sizeWeight
âœ“ Appointment: animalId, petOwnerId, startTime, endTime, status
âœ“ ClinicalRecord: medicalRecordId, veterinarianId, type, treatmentDate
âœ“ Notification: userId, title, message, read, channel
âœ“ SystemLog: targetTable, targetId, action, type

```

## ğŸ“Š EstatÃ­sticas do Schema

- **Total de Tabelas**: 15
- **Total de Enums**: 11
- **Total de Relacionamentos**: 26
- **Campos com Unique**: 10
- **Campos com Index**: 15+

## ğŸ” SeguranÃ§a e LGPD

- âœ… Logs de auditoria (`systemLogs`)
- âœ… Rastreamento de aÃ§Ãµes por usuÃ¡rio
- âœ… Registro de IP de origem
- âœ… Timestamps automÃ¡ticos
- âœ… Soft delete possÃ­vel (adicionar campo `deletedAt` se necessÃ¡rio)

## ğŸ¯ Principais Funcionalidades Suportadas

1. âœ… **AutenticaÃ§Ã£o Multi-perfil** (6 roles diferentes)
2. âœ… **GestÃ£o de Animais** (cadastro, microchip, histÃ³rico)
3. âœ… **Agendamentos** (triagem, cirurgia, pÃ³s-operatÃ³rio)
4. âœ… **ProntuÃ¡rio EletrÃ´nico** (Ãºnico por animal)
5. âœ… **Registros ClÃ­nicos** (triagem, cirurgias, acompanhamento)
6. âœ… **NotificaÃ§Ãµes Multi-canal** (push, email, WhatsApp)
7. âœ… **Termo de Compromisso** (assinatura digital)
8. âœ… **Heatmap** (endereÃ§os dos tutores)
9. âœ… **Auditoria LGPD** (todos os logs rastreÃ¡veis)
10. âœ… **Boletins Informativos** (comunicaÃ§Ã£o segmentada)
